
def test_client(ip, port):
    import requests
    import json
    from signal import signal, SIGPIPE, SIG_DFL
    signal(SIGPIPE, SIG_DFL)
    payload = {
        "fog_element": 1,
        "measurements": [{
            "node_id": 1,
            "type": "data",
            "received": "25081617154300",
            "header": "datetime,lat,lng,light,temperature,humidity,rain",
            "load": ["25081616493200,-22.865690,-43.223827,999,35.00,31.00,781",
                "25081616493300,-22.865690,-43.223831,999,35.00,31.00,777",
                "25081616493400,-22.865690,-43.223831,999,35.00,31.00,775",
                "25081616493500,-22.865690,-43.223831,998,35.00,31.00,779",
                "25081616493600,-22.865690,-43.223831,999,35.00,31.00,773",
                "25081616493700,-22.865690,-43.223831,999,35.00,31.00,784",
                "25081616493800,-22.865692,-43.223831,999,35.00,31.00,782",
                "25081616493900,-22.865692,-43.223835,999,35.00,31.00,787",
                "25081616494000,-22.865692,-43.223835,999,35.00,31.00,779",
                "25081616494100,-22.865694,-43.223831,999,35.00,31.00,778",
                "25081616494200,-22.865694,-43.223831,998,35.00,31.00,785",
                "25081616494300,-22.865694,-43.223835,999,35.00,30.00,780",
                "25081616494400,-22.865694,-43.223835,999,35.00,30.00,780"
            ]
        }, {
            "node_id": "2",
            "type": "data",
            "received": "25081617154300",
            "header": "datetime,lat,lng,light,temperature,humidity,rain",
            "load": ["25081616493200,-22.865690,-43.223827,999,35.00,31.00,781",
                "25081616493300,-22.865690,-43.223831,999,35.00,31.00,777",
                "25081616493400,-22.865690,-43.223831,999,35.00,31.00,775",
                "25081616493500,-22.865690,-43.223831,998,35.00,31.00,779",
                "25081616493600,-22.865690,-43.223831,999,35.00,31.00,773",
                "25081616493700,-22.865690,-43.223831,999,35.00,31.00,784",
                "25081616493800,-22.865692,-43.223831,999,35.00,31.00,782",
                "25081616493900,-22.865692,-43.223835,999,35.00,31.00,787",
                "25081616494000,-22.865692,-43.223835,999,35.00,31.00,779",
                "25081616494100,-22.865694,-43.223831,999,35.00,31.00,778",
                "25081616494200,-22.865694,-43.223831,998,35.00,31.00,785",
                "25081616494300,-22.865694,-43.223835,999,35.00,30.00,780",
                "25081616494400,-22.865694,-43.223835,999,35.00,30.00,780"
            ]
        }]
    }
    payload = json.dumps(payload)
    headers = {'Content-Type': 'application/json', 
            'Content-Length': str(len(payload))}
    r = requests.post('http://%s:%d' %(ip, port), data=payload, headers=headers)

if __name__ == "__main__":
    ip = '192.168.0.20'
    port = 50000
    cloud_client(ip, port)


